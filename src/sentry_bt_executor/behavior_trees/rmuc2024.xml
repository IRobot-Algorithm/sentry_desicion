<?xml version="1.0"?>
<root main_tree_to_execute="BehaviorTree">
  <!-- ///// 此树用于2024分区赛 ///// -->
  <BehaviorTree ID="BehaviorTree">
    <Fallback ID="MainFallback">
      <Sequence ID="GameStartSequence">
        <Condition ID="gameStart"/>
        <Fallback>


          <!-- ///// 必须回家 ///// -->
          <Sequence ID="MustBackSequence">
            <!-- 前哨站存活？ -->
            <Inverter>
              <Condition ID="outpostSurvives"/>
            </Inverter>
            <!-- 基地护甲展开？ -->
            <Inverter>
              <Condition ID="baseUnfolds"/>
            </Inverter>
            <!-- 回家 -->
            <AlwaysSuccess>
              <Action ID="GoBack" service_name="nav_goal"/>
            </AlwaysSuccess>
          </Sequence>

          <!-- ///// 有目标给导航发有目标 ///// -->
          <Sequence>
            <Condition ID="haveTarget"/>
            <Action ID="SetNavTarget" service_name="nav_target" 
              have_target="{have_target}" 
              gimbal="{gimbal}" 
              target_pos="{target_pos}"
            />
          </Sequence>

          <!-- ///// 巡逻 ///// -->
          <AlwaysSuccess>
            <Sequence>
              <Action ID="RmulPatrol" service_name="nav_goal"/>
              <Action ID="RmulPatrol2" service_name="nav_goal"/>
              <Action ID="GoBack" service_name="nav_goal"/>
            </Sequence>
          </AlwaysSuccess>


        </Fallback>
      </Sequence>

      <Action ID="GoBack" service_name="nav_goal"/>
    </Fallback>
  </BehaviorTree>

</root>
